# Arcaea-chart-related-tools
此脚本用于对Arcaea铺面特定片段进行提取，或将AudioOffset延迟修正为0。

README是发布B站专栏前写好的，写得比较乱，建议看B站专栏：
https://m.bilibili.com/opus/1174718412110168067?plat_id=5&share_from=article&share_medium=android&share_plat=android&share_session_id=776a9cbf-5917-446f-bb0a-ab21fcc31b19&share_source=QQ&share_tag=s_i&spmid=dt.opus-detail.0.0&timestamp=1772377058&unique_k=0HT127o

---

## 使用方法：

#### 前置文件与工具：

1. 可运行python脚本的设备。这里更建议用电脑。运行环境为Python3.6及以上版本。

2. 可运行python脚本的IDE、终端环境等工具，如VS Code，PowerShell等。

3. 待处理的铺面文件。Arcaea铺面文件后缀通常为.aff，或者没有后缀。

4. 待处理的ogg格式音乐文件。

5. Arcaea铺面文件编辑器Arcade。~~你都会搞铺面文件了，不可能没有Arcade吧~~

6. 可处理ogg格式音乐的程序，如FL Studio，Cubase等。(如果你能搞到现成的音乐片段或只需要调整Audiooffset可忽略这条)

*注：此教程不提供Arcaea官方/自制铺面与音乐的获取方式，音乐与铺面文件请另行获取*

#### 操作方法：

##### 提取铺面特定片段：

假设我们有一段长为3min的音乐文件base.ogg与铺面文件2.aff。音乐与铺面文件满足音乐开始或结束时铺面播放也恰好开始或结束，且铺面恰好结束时Arcade显示的音频时间为30000。现在我们需要提取音频时间从10000到20000的铺面片段。

1. 根据Arcade或铺面游玩经历确定铺面音频时间从10000到20000对应的音乐片段，我们假设音频时间从10000到20000恰好对应从1min00s开始到1min59s末(或2min00s初)这段音乐。

2. 打开FL Studio或其他可处理音频的工具，将音乐文件拖入Track轨道中，调整BPM，截取从1min00s开始到1min59s末的音乐片段并输出为新的ogg格式音乐文件。

3. 使用VS Code等工具运行python脚本，复制待处理铺面文件文件地址并粘贴于运行窗口，输入1(1代表提取铺面特定片段)，再分别输入铺面片段起始位置和终止位置对应的音频时间，运行脚本后即可完成特定铺面片段的提取。处理后的铺面文件默认与待处理铺面文件存放在同一位置。

4. 将处理后的铺面文件与音乐片段按Arcade读取要求重新命名并存放在文件夹中，完成后Arcade可正常读取处理后的铺面。如果铺面与音乐未完全对准，详见**AudioOffset延迟调整**。

- 第一条与第二条仅为举例，并非一定要以始末时间点来截取音乐片段。  
以tempestissimo byd为例，假设我想要提取慢速段铺面用于个人练习，那么将音乐文件拖入FL Studio轨道后先将bpm调整为231，再将音乐片段拖到轨道开头，此时发现慢速段音乐落在第74、75、76、77轨(Track轨道区域上方那排数字)，那么只需截取第74到第77轨音乐片段并保存即可。

##### AudioOffset延迟调整

如果延迟Audiooffset为0时铺面(或提取的铺面片段)与音乐没有完全对准，或者铺面与音乐对准后延迟Audiooffset不为0，而你既想保持铺面与音乐始终对准，又想把延迟Audiooffset调为0，请继续以下步骤：

1. 进入Arcade，加载铺面文件并调整延迟，确保音乐与铺面完全对准，记下此时的延迟值。

2. 运行python脚本，复制待处理铺面文件文件地址并粘贴于运行窗口，输入2(2代表调整延迟Audiooffset)，输入记录的延迟时间，运行脚本。处理后的铺面文件默认与待处理铺面文件存放在同一位置。

3. 将原处理文件替换为处理好的铺面文件，Arcade可正常读取，此时Audiooffset为0且铺面与音乐已对准。

---

## 个人声明
1. 本工具仅用于Arcaea铺面相关的学习与研究，**禁止商用**
2. 作者：[CE2Y](http://github.com/0ce2y0)
3. 版权： 2026 CE2Y，遵循[MIT License](LICENSE)
4. 免责：使用本工具产生的问题，作者不承担相关责任。

---

### AI辅助说明
脚本开发过程中，AI仅用于完成**重复性代码编写**(如函数的编写)、**代码语法纠正**和**小范围技术思路提供**(如铺面文件arctap行处理，负数timing的特殊处理等)，核心功能逻辑由开发者自主设计与实现。
